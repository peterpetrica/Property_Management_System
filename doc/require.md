# 数据库的表单数据结构预期实现（欢迎自己修改，不过得在这标注）

## 用户相关表

### 用户表 (users)

- user_id (主键)(这是字符串，不是数字)
- username (登录名)
- password_hash (密码哈希)
- name (姓名)
- phone_number (电话)
- email (邮箱)
- role_id (角色 ID，外键)
- status (状态)
- registration_date (注册日期)

### 角色表 (roles)

- role_id (主键)
- role_name (角色名：管理员、物业服务人员、业主)
- permission_level (权限级别)

## 物业资源表

### 楼宇表 (buildings)

- building_id (主键)
- building_name (楼宇名称)
- address (地址)
- floors_count (楼层数)

### 房屋表 (rooms)

- room_id (主键)
- building_id (楼宇 ID，外键)
- room_number (房间号)
- floor (楼层)
- area_sqm (面积平方米)
- owner_id (业主 ID，外键)
- status (状态)

### 停车位表 (parking_spaces)

- parking_id (主键)
- parking_number (车位号)
- owner_id (业主 ID，外键)
- status (状态)

## 物业服务表

### 物业人员表 (staff)

- staff_id (主键)
- user_id (用户 ID，外键)
- staff_type_id (人员类型 ID，外键)
- hire_date (入职日期)
- status (状态)

### 人员类型表 (staff_types)

- staff_type_id (主键)
- type_name (类型名称：管家、保安、清洁工等)
- description (描述)

### 服务区域表 (service_areas)

- area_id (主键)
- staff_id (物业人员 ID，外键)
- building_id (楼宇 ID，外键)
- assignment_date (分配日期)

### 服务记录表 (service_records)

- record_id (主键)
- staff_id (物业人员 ID，外键)
- service_type (服务类型)
- service_date (服务日期)
- description (描述)
- status (状态)
- target_id (目标 ID：楼宇 ID 或房屋 ID)

## 费用相关表

### 费用标准表 (fee_standards)

- standard_id (主键)
- fee_type (费用类型：物业费、停车费等)
- price_per_unit (单价)
- unit (单位：平方米、月等)
- effective_date (生效日期)
- end_date (结束日期)

### 交易表 (transactions)

- transaction_id (主键)
- user_id (用户 ID，外键)
- room_id (房屋 ID，外键，物业费时有值)
- parking_id (停车位 ID，外键，停车费时有值)
- fee_type (费用类型)
- amount (金额)
- payment_date (支付日期)
- due_date (截止日期)
- payment_method (支付方式)
- status (状态：已付、未付、逾期)
- period_start (账单开始日期)
- period_end (账单结束日期)

# 物业管理系统

对某物业公司对一个小区的物业管理进行简单的模拟

## 重点要求：请使用 SQLlite

其次，项目配置了 vcpkg 和 cmake，请保留此二特性

## 背景说明

物业公司管理的小区有多栋楼房，每栋楼房内有多个住户（业主）。
物业公司的物业服务人员分多种类型，例如管家、保安、清洁工等，每种类型有多人。
每名物业服务人员负责自己服务区域内业主或楼房的相关工作。其所负责的服务区域由管理员分派。
小区有多个停车位，停车位的数量可能存在增减情况。
物业公司负责收取物业费、停车费等费用。物业费按面积收取，物业费标准（即每平方米的价格）是可以动态设置和调整的，比如从 1.5 元/平米调整为 1.8 元/平米。停车费的标准也是可以动态设置和调整的。
记录业主所有的缴费信息。

## 主要功能说明

系统共有三个角色：管理员、物业服务人员、业主

### 管理员

#### 信息管理

对小区楼宇、房屋、物业服务人员、物业服务人员类型、收费标准、业主、停车位等信息进行管理，包括增加、修改、删除等。
服务分配管理
分配或调整物业服务人员的负责区域，如分配张三为小区第 1、3 栋楼的管家，分配李四为小区第 8-10 栋楼的保安、王五为第 1、3 栋楼的保洁等。
信息查询
对各种信息（包括业主缴费、物业服务信息）进行查询，包括简单、组合、模糊查询，例如查询某业主某年是否缴费、查询某业主所有缴费情况等
信息排序
对各种信息（包括业主缴费、物业服务信息）进行排序，包括按单一属性、按多属性排序等，尽可能对查询结果进行多种排序（例如对查询出来的业主按照姓名进行升序排序）

#### 信息统计

对各种信息（包括业主缴费、物业服务信息）进行统计，包括按单一属性、按多属性统计、预设统计、按条件统计等（例如统计某年所有未缴费的业主数量、截止某时间已经缴费的业主数量等）

#### 系统维护

对自己的密码进行维护、对物业服务人员的密码进行重置、数据备份、数据恢复

#### 其他

可增加其他有用的功能

### 物业服务人员

#### 物业服务管理

记录对自己所负责区域的服务情况，如给业主发送缴费提醒等

#### 信息查询

查看自己负责哪些区域以及相关信息
对自己所负责区域的各种信息（包括业主缴费信息）进行查询，包括简单、组合、模糊查询，例如查询某业主某年是否缴费、查询某业主所有缴费情况等

#### 信息排序

对自己所负责区域的各种信息（包括业主缴费信息）进行排序，包括按单一属性、按多属性排序等，尽可能对查询结果进行多种排序（例如对查询出来的业主按照姓名进行升序排序）

#### 信息统计

对自己所负责区域的各种信息（包括业主缴费信息）进行统计，包括按单一属性、按多属性统计、预设统计、按条件统计等（例如统计某年所有未缴费的业主数量、截止某时间已经缴费的业主数量等）

#### 系统维护

对自己的密码进行维护

#### 其他

可增加其他有用的功能

### 业主

#### 个人信息管理

注册，录入自己的信息，包括姓名、联系电话等；
对自己的信息进行修改

#### 缴费管理

管理自己的缴费信息，包括查询应缴费用、缴费等

#### 信息查询

对自己的缴费记录进行各种查询；
查看为自己房屋服务的管家、保安、保洁人员的信息；
对其他各种信息进行查询。
查询包括简单、组合、模糊查询，例如查询小区楼宇信息、物业收费标准信息等，但不能涉及其他业主信息以及其他敏感信息

#### 信息排序

对自己的缴费记录进行各种排序；
所其他各种信息进行排序。
排序包括按单一属性、按多属性排序等，尽可能对查询结果进行多种排序（例如对查询出来的缴费记录按照缴费时间进行降序排序），但不能涉及其他业主信息以及其他敏感信息

#### 信息统计

对自己的缴费记录进行各种统计；
所其他各种信息进行统计。
统计包括按单一属性、按多属性统计、预设统计、按条件统计等（例如统计几年内缴费的总金额等），但不能涉及其他业主信息以及其他敏感信息

#### 系统维护

对自己的密码进行维护

#### 其他

可增加其他有用的功能

## 具体要求解释

### 数据管理

也称数据维护，指对数据进行增加、修改、删除等操作

### 数据查询

#### 简单查询

也称精确查询，按单一条件进行精确查询，例如查询姓名为“张三”的学生

#### 组合查询

按照多个属性进行查询，例如查询学号为“226001”并且课程名为“高数”的成绩

#### 模糊查询

也称包含查询，例如查询姓名中带有“超”的学生

### 排序

#### 按单一属性排序

如 按照学号进行升序或者降序排序
按照成绩进行升序或者降序排序

#### 按照多属性排序

如先按照班级、再按照姓名进行排序

### 统计

统计是指根据用户输入的条件对数据进行汇总，并将汇总结果进行显示，如：通过 100 人，这个 100 就是统计结果

#### 按单一属性统计

如 按性别统计人数；
统计不及格学生数

#### 按多属性统计

如 按班级、性别统计人数；
统计 1 班、高数不及格学生数

#### 预设统计

按照系统预设的统计条件进行单一属性或者多属性统计，这些统计条件是固定的

#### 按条件统计

按照用户输入的统计条件进行统计，比如用户输入的条件为：统计 1 班、高数>75 分的人数

### 系统维护

#### 密码维护

密码修改、密码找回等

#### 数据备份

将存储数据的文件复制到一个指定的文件夹中

#### 数据恢复

将复制的文件再重新拷贝回原文件夹

#### 退出系统

用户通过功能选择退出系统

### 应在代码中用到以下技术：

- 文件的读写
- 采用结构体和动态链表进行数据操作

### 所作系统要符合实际应用场景

所作系统有通用性、界面美观、操作方便
要考虑系统安全，例如要使用账户、密码登录后才能使用等。

### 权限设计：权重值

### 同一查询接口，按权重值执行确定相应操作执行

### 类数据库设计，专门程序存放数据，与接口分离

### 界面端实现

#### 登录界面

输入姓名密码，向数据库发送请求验证，尝试实现密码隐藏
依据结果决定是否跳转

#### 主界面

跳转到主界面后实现以上要求的功能，根据权重值返回应当看见的界面
根据权重值，部分信息不会被数据库返回，注意有缺省实现
这四个功能暂定四个主要文件（自己可以细分）

#### 可能还需要一个中间件来转换数据库返回格式（暂定）

#### 统一查询接口

姓名 密码，传入数据库，验证，成功返回用户 ID 和角色权重值
使用构造查询语句对数据库查询
包括 用户 ID 查询表单 查询内容
数据库返回结果
解析成对应格式，进行相应操作后展示

#### 以下是数据库预期实现（使用 SQLite） 

##### 业主信息：

姓名 联系电话 密码 租住楼房信息（~栋~号） 客户编码 是否需要发送缴费提醒 权重值

##### 服务人员信息：

姓名 联系电话 密码 管理楼房信息（~栋~号） 服务人员编码 权重值

##### 管理员信息：

姓名 密码 管理员编码 权重值

##### 小区信息：

楼房栋编号

##### 楼房信息：

对应房间面积 占用情况 物业费余额 缴费情况

##### 交易信息：

缴费日期 缴费金额 业主编码 房屋信息（~栋~号）
