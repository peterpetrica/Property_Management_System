\hypertarget{apartment_8c}{}\doxysection{src/models/apartment.c 文件参考}
\label{apartment_8c}\index{src/models/apartment.c@{src/models/apartment.c}}
{\ttfamily \#include \char`\"{}models/apartment.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}auth/auth.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utils/utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}db/db\+\_\+query.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
apartment.\+c 的引用(Include)关系图\+:
% FIG 0
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{apartment_8c_ab5350782ef95a9f31e2b1c25eb1f4f59}{SQL\+\_\+\+MAX\+\_\+\+LENGTH}}~4096
\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{apartment_8c_a01de98826735d07d7d41604a2ced9a64}{log\+\_\+error}} (const char $\ast$format,...)
\item 
void \mbox{\hyperlink{apartment_8c_ade762acc676da9bb7e589a8a1ac43424}{log\+\_\+info}} (const char $\ast$format,...)
\item 
bool \mbox{\hyperlink{apartment_8c_a63ea4ea26e546d75de3f1c096fd42b35}{add\+\_\+room}} (Database $\ast$db, const char $\ast$user\+\_\+id, User\+Type user\+\_\+type, Room $\ast$room)
\item 
bool \mbox{\hyperlink{apartment_8c_a3ee28cb32cd0361f149bbe6bc70a2067}{update\+\_\+room}} (Database $\ast$db, const char $\ast$user\+\_\+id, User\+Type user\+\_\+type, Room $\ast$room)
\item 
bool \mbox{\hyperlink{apartment_8c_a6a304349bcf5a8c6d5ca1d6492274551}{delete\+\_\+room}} (Database $\ast$db, const char $\ast$user\+\_\+id, User\+Type user\+\_\+type, const char $\ast$room\+\_\+id)
\item 
bool \mbox{\hyperlink{apartment_8c_abc341fc49d9d611aa0ab40491b452b3d}{get\+\_\+room}} (Database $\ast$db, const char $\ast$room\+\_\+id, Room $\ast$room)
\item 
bool \mbox{\hyperlink{apartment_8c_aa1bb1cf39436e25a94c5b311a4a3f6db}{list\+\_\+rooms\+\_\+by\+\_\+building}} (Database $\ast$db, const char $\ast$user\+\_\+id, User\+Type user\+\_\+type, const char $\ast$building\+\_\+id, Query\+Result $\ast$result)
\item 
bool \mbox{\hyperlink{apartment_8c_a5719db844b0918aafaa6d253b8c45957}{get\+\_\+owner\+\_\+rooms}} (Database $\ast$db, const char $\ast$user\+\_\+id, User\+Type user\+\_\+type, const char $\ast$owner\+\_\+id, Query\+Result $\ast$result)
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{apartment_8c_ab5350782ef95a9f31e2b1c25eb1f4f59}\label{apartment_8c_ab5350782ef95a9f31e2b1c25eb1f4f59}} 
\index{apartment.c@{apartment.c}!SQL\_MAX\_LENGTH@{SQL\_MAX\_LENGTH}}
\index{SQL\_MAX\_LENGTH@{SQL\_MAX\_LENGTH}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{SQL\_MAX\_LENGTH}{SQL\_MAX\_LENGTH}}
{\footnotesize\ttfamily \#define SQL\+\_\+\+MAX\+\_\+\+LENGTH~4096}

\mbox{\hyperlink{apartment_8c}{apartment.\+c}} 房屋管理模块实现

该文件实现了系统中与房屋相关的所有功能，包括：
\begin{DoxyItemize}
\item 添加新房屋
\item 更新房屋信息
\item 删除房屋
\item 获取房屋列表
\item 获取特定楼宇的所有房屋
\item 获取业主的所有房屋 
\end{DoxyItemize}

\doxysubsection{函数说明}
\mbox{\Hypertarget{apartment_8c_a63ea4ea26e546d75de3f1c096fd42b35}\label{apartment_8c_a63ea4ea26e546d75de3f1c096fd42b35}} 
\index{apartment.c@{apartment.c}!add\_room@{add\_room}}
\index{add\_room@{add\_room}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{add\_room()}{add\_room()}}
{\footnotesize\ttfamily bool add\+\_\+room (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{user\+\_\+id,  }\item[{User\+Type}]{user\+\_\+type,  }\item[{Room $\ast$}]{room }\end{DoxyParamCaption})}

添加新房屋

在系统中创建新的房屋记录，需要管理员或物业服务人员权限


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em user\+\_\+id} & 执行操作的用户\+ID \\
\hline
{\em user\+\_\+type} & 执行操作的用户类型 \\
\hline
{\em room} & 房屋信息结构体 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
操作成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 1
这是这个函数的调用关系图\+:
% FIG 2
\mbox{\Hypertarget{apartment_8c_a6a304349bcf5a8c6d5ca1d6492274551}\label{apartment_8c_a6a304349bcf5a8c6d5ca1d6492274551}} 
\index{apartment.c@{apartment.c}!delete\_room@{delete\_room}}
\index{delete\_room@{delete\_room}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{delete\_room()}{delete\_room()}}
{\footnotesize\ttfamily bool delete\+\_\+room (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{user\+\_\+id,  }\item[{User\+Type}]{user\+\_\+type,  }\item[{const char $\ast$}]{room\+\_\+id }\end{DoxyParamCaption})}

删除房屋

从系统中删除房屋记录，仅限管理员使用，且房屋不能有关联的交易记录


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em user\+\_\+id} & 执行操作的用户\+ID \\
\hline
{\em user\+\_\+type} & 执行操作的用户类型 \\
\hline
{\em room\+\_\+id} & 要删除的房屋\+ID \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
操作成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 3
这是这个函数的调用关系图\+:
% FIG 4
\mbox{\Hypertarget{apartment_8c_a5719db844b0918aafaa6d253b8c45957}\label{apartment_8c_a5719db844b0918aafaa6d253b8c45957}} 
\index{apartment.c@{apartment.c}!get\_owner\_rooms@{get\_owner\_rooms}}
\index{get\_owner\_rooms@{get\_owner\_rooms}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{get\_owner\_rooms()}{get\_owner\_rooms()}}
{\footnotesize\ttfamily bool get\+\_\+owner\+\_\+rooms (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{user\+\_\+id,  }\item[{User\+Type}]{user\+\_\+type,  }\item[{const char $\ast$}]{owner\+\_\+id,  }\item[{Query\+Result $\ast$}]{result }\end{DoxyParamCaption})}

查询业主的房屋

获取指定业主名下的所有房屋信息，需要管理员、物业服务人员或业主本人权限


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em user\+\_\+id} & 执行操作的用户\+ID \\
\hline
{\em user\+\_\+type} & 执行操作的用户类型 \\
\hline
{\em owner\+\_\+id} & 业主\+ID \\
\hline
{\em result} & 查询结果存储结构体 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
操作成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 5
这是这个函数的调用关系图\+:
% FIG 6
\mbox{\Hypertarget{apartment_8c_abc341fc49d9d611aa0ab40491b452b3d}\label{apartment_8c_abc341fc49d9d611aa0ab40491b452b3d}} 
\index{apartment.c@{apartment.c}!get\_room@{get\_room}}
\index{get\_room@{get\_room}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{get\_room()}{get\_room()}}
{\footnotesize\ttfamily bool get\+\_\+room (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{room\+\_\+id,  }\item[{Room $\ast$}]{room }\end{DoxyParamCaption})}

获取房屋信息

根据房屋\+ID获取详细信息


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em room\+\_\+id} & 房屋\+ID \\
\hline
{\em room} & 用于存储房屋信息的结构体指针 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
获取成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 7
这是这个函数的调用关系图\+:
% FIG 8
\mbox{\Hypertarget{apartment_8c_aa1bb1cf39436e25a94c5b311a4a3f6db}\label{apartment_8c_aa1bb1cf39436e25a94c5b311a4a3f6db}} 
\index{apartment.c@{apartment.c}!list\_rooms\_by\_building@{list\_rooms\_by\_building}}
\index{list\_rooms\_by\_building@{list\_rooms\_by\_building}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{list\_rooms\_by\_building()}{list\_rooms\_by\_building()}}
{\footnotesize\ttfamily bool list\+\_\+rooms\+\_\+by\+\_\+building (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{user\+\_\+id,  }\item[{User\+Type}]{user\+\_\+type,  }\item[{const char $\ast$}]{building\+\_\+id,  }\item[{Query\+Result $\ast$}]{result }\end{DoxyParamCaption})}

获取某楼宇内所有房屋

查询并返回指定楼宇的所有房屋信息列表


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em user\+\_\+id} & 执行操作的用户\+ID \\
\hline
{\em user\+\_\+type} & 执行操作的用户类型 \\
\hline
{\em building\+\_\+id} & 楼宇\+ID \\
\hline
{\em result} & 查询结果存储结构体 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
操作成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 9
这是这个函数的调用关系图\+:
% FIG 10
\mbox{\Hypertarget{apartment_8c_a01de98826735d07d7d41604a2ced9a64}\label{apartment_8c_a01de98826735d07d7d41604a2ced9a64}} 
\index{apartment.c@{apartment.c}!log\_error@{log\_error}}
\index{log\_error@{log\_error}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{log\_error()}{log\_error()}}
{\footnotesize\ttfamily void log\+\_\+error (\begin{DoxyParamCaption}\item[{const char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}

记录错误日志


\begin{DoxyParams}{参数}
{\em format} & 格式化字符串 \\
\hline
{\em ...} & 可变参数列表 \\
\hline
\end{DoxyParams}
这是这个函数的调用关系图\+:
% FIG 11
\mbox{\Hypertarget{apartment_8c_ade762acc676da9bb7e589a8a1ac43424}\label{apartment_8c_ade762acc676da9bb7e589a8a1ac43424}} 
\index{apartment.c@{apartment.c}!log\_info@{log\_info}}
\index{log\_info@{log\_info}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{log\_info()}{log\_info()}}
{\footnotesize\ttfamily void log\+\_\+info (\begin{DoxyParamCaption}\item[{const char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}

记录信息日志


\begin{DoxyParams}{参数}
{\em format} & 格式化字符串 \\
\hline
{\em ...} & 可变参数列表 \\
\hline
\end{DoxyParams}
这是这个函数的调用关系图\+:
% FIG 12
\mbox{\Hypertarget{apartment_8c_a3ee28cb32cd0361f149bbe6bc70a2067}\label{apartment_8c_a3ee28cb32cd0361f149bbe6bc70a2067}} 
\index{apartment.c@{apartment.c}!update\_room@{update\_room}}
\index{update\_room@{update\_room}!apartment.c@{apartment.c}}
\doxysubsubsection{\texorpdfstring{update\_room()}{update\_room()}}
{\footnotesize\ttfamily bool update\+\_\+room (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{user\+\_\+id,  }\item[{User\+Type}]{user\+\_\+type,  }\item[{Room $\ast$}]{room }\end{DoxyParamCaption})}

修改房屋信息

更新已有房屋的信息，需要管理员或物业服务人员权限


\begin{DoxyParams}{参数}
{\em db} & 数据库连接 \\
\hline
{\em user\+\_\+id} & 执行操作的用户\+ID \\
\hline
{\em user\+\_\+type} & 执行操作的用户类型 \\
\hline
{\em room} & 更新后的房屋信息结构体 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
操作成功返回true，失败返回false 
\end{DoxyReturn}
函数调用图\+:
% FIG 13
这是这个函数的调用关系图\+:
% FIG 14
