\hypertarget{db__utils_8c}{}\doxysection{src/db/db\+\_\+utils.c 文件参考}
\label{db__utils_8c}\index{src/db/db\_utils.c@{src/db/db\_utils.c}}
{\ttfamily \#include \char`\"{}db/database.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$sqlite3.\+h$>$}\newline
db\+\_\+utils.\+c 的引用(Include)关系图\+:
% FIG 0
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{db__utils_8c_aac88514e9f719e0911e586adfea1ba21}{db\+\_\+count\+\_\+query}} (Database $\ast$db, const char $\ast$query, int $\ast$count)
\item 
bool \mbox{\hyperlink{db__utils_8c_a6b693e43e70d69906a14cad32c1d13c9}{db\+\_\+table\+\_\+exists}} (Database $\ast$db, const char $\ast$table\+\_\+name)
\item 
bool \mbox{\hyperlink{db__utils_8c_aeb345eb3e6b20e9931d9b8a50dc06671}{db\+\_\+record\+\_\+exists}} (Database $\ast$db, const char $\ast$query)
\item 
bool \mbox{\hyperlink{db__utils_8c_a277a2883021b1d6833183e26378a9848}{backup\+\_\+database}} (Database $\ast$db)
\item 
bool \mbox{\hyperlink{db__utils_8c_a40c628d8fc7f6a303bb421d90ab80531}{restore\+\_\+database}} (Database $\ast$db)
\end{DoxyCompactItemize}


\doxysubsection{函数说明}
\mbox{\Hypertarget{db__utils_8c_a277a2883021b1d6833183e26378a9848}\label{db__utils_8c_a277a2883021b1d6833183e26378a9848}} 
\index{db\_utils.c@{db\_utils.c}!backup\_database@{backup\_database}}
\index{backup\_database@{backup\_database}!db\_utils.c@{db\_utils.c}}
\doxysubsubsection{\texorpdfstring{backup\_database()}{backup\_database()}}
{\footnotesize\ttfamily bool backup\+\_\+database (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db }\end{DoxyParamCaption})}

备份数据库


\begin{DoxyParams}{参数}
{\em db} & 数据库连接指针 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
备份成功返回true，失败返回false 
\end{DoxyReturn}
这是这个函数的调用关系图\+:
% FIG 1
\mbox{\Hypertarget{db__utils_8c_aac88514e9f719e0911e586adfea1ba21}\label{db__utils_8c_aac88514e9f719e0911e586adfea1ba21}} 
\index{db\_utils.c@{db\_utils.c}!db\_count\_query@{db\_count\_query}}
\index{db\_count\_query@{db\_count\_query}!db\_utils.c@{db\_utils.c}}
\doxysubsubsection{\texorpdfstring{db\_count\_query()}{db\_count\_query()}}
{\footnotesize\ttfamily int db\+\_\+count\+\_\+query (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{query,  }\item[{int $\ast$}]{count }\end{DoxyParamCaption})}

\mbox{\hyperlink{db__utils_8c}{db\+\_\+utils.\+c}} 数据库工具模块

本模块提供各种数据库辅助工具函数，简化数据库常见操作。

主要功能：
\begin{DoxyItemize}
\item 计数查询：快速获取查询结果的记录数量
\item 表存在检查：验证特定表是否存在于数据库中
\item 记录存在检查：验证特定记录是否存在
\end{DoxyItemize}

这些工具函数为物业管理系统的其他模块提供基础数据库操作支持， 简化了代码复杂度并提高了代码重用性。 执行简单的\+SQL查询并返回结果数量


\begin{DoxyParams}{参数}
{\em db} & 数据库连接指针 \\
\hline
{\em query} & 要执行的\+SQL查询语句 \\
\hline
{\em count} & 输出参数，用于存储查询结果的记录数量 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
成功返回0，失败返回错误码 
\end{DoxyReturn}
\mbox{\Hypertarget{db__utils_8c_aeb345eb3e6b20e9931d9b8a50dc06671}\label{db__utils_8c_aeb345eb3e6b20e9931d9b8a50dc06671}} 
\index{db\_utils.c@{db\_utils.c}!db\_record\_exists@{db\_record\_exists}}
\index{db\_record\_exists@{db\_record\_exists}!db\_utils.c@{db\_utils.c}}
\doxysubsubsection{\texorpdfstring{db\_record\_exists()}{db\_record\_exists()}}
{\footnotesize\ttfamily bool db\+\_\+record\+\_\+exists (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{query }\end{DoxyParamCaption})}

检查数据库记录是否存在


\begin{DoxyParams}{参数}
{\em db} & 数据库连接指针 \\
\hline
{\em query} & 用于检查记录是否存在的\+SQL查询 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
记录存在返回true，不存在返回false 
\end{DoxyReturn}
\mbox{\Hypertarget{db__utils_8c_a6b693e43e70d69906a14cad32c1d13c9}\label{db__utils_8c_a6b693e43e70d69906a14cad32c1d13c9}} 
\index{db\_utils.c@{db\_utils.c}!db\_table\_exists@{db\_table\_exists}}
\index{db\_table\_exists@{db\_table\_exists}!db\_utils.c@{db\_utils.c}}
\doxysubsubsection{\texorpdfstring{db\_table\_exists()}{db\_table\_exists()}}
{\footnotesize\ttfamily bool db\+\_\+table\+\_\+exists (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db,  }\item[{const char $\ast$}]{table\+\_\+name }\end{DoxyParamCaption})}

检查数据库表是否存在


\begin{DoxyParams}{参数}
{\em db} & 数据库连接指针 \\
\hline
{\em table\+\_\+name} & 要检查的表名 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
表存在返回true，不存在返回false 
\end{DoxyReturn}
\mbox{\Hypertarget{db__utils_8c_a40c628d8fc7f6a303bb421d90ab80531}\label{db__utils_8c_a40c628d8fc7f6a303bb421d90ab80531}} 
\index{db\_utils.c@{db\_utils.c}!restore\_database@{restore\_database}}
\index{restore\_database@{restore\_database}!db\_utils.c@{db\_utils.c}}
\doxysubsubsection{\texorpdfstring{restore\_database()}{restore\_database()}}
{\footnotesize\ttfamily bool restore\+\_\+database (\begin{DoxyParamCaption}\item[{Database $\ast$}]{db }\end{DoxyParamCaption})}

恢复数据库


\begin{DoxyParams}{参数}
{\em db} & 数据库连接指针 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
恢复成功返回true，失败返回false 
\end{DoxyReturn}
这是这个函数的调用关系图\+:
% FIG 2
